
> 阴影是光线被物体阻挡的结果
>
> 1. 使得场景更为真实
> 2. 反应物体之间的相对位置关系，反应深度信息


**目前在实时渲染领域还没有找到一种完美的阴影算法。游戏中使用最多的一种技术为：阴影贴图（shadow mapping）**

# 阴影映射

## 技术讨论

**核心思想**：将相机放在光源位置，此时能看到的部分都是能够被该光源照亮的部分，其余看不到的部分都是处于阴影之中的。

**实现方式**：利用射线检测，从光源位置发出射线对场景中物体进行遍历，并更新射线和物体碰撞的最近点，其余点都位于阴影中。

**存在问题**：从光源生成大量的射线十分消耗性能，实时渲染不可取。

**折中方案**：
- 从光源位置出发渲染场景的透视图，将场景的深度信息存储到纹理，这个纹理叫做**深度贴图（depth map）**。
- 在相机视角渲染场景时，顺便计算**该点在光源视角下的深度值**
- 从深度贴图中获取对应位置的深度信息
- 如果深度值更小说明该点被照亮，否则说明处于阴影。


## 问题与解决

### 阴影失真（Shadow Acne）和阴影偏移（Shadow Bias）

![](../img/shadow_acne.png)


### 阴影悬浮（Peter Panning）和正面剔除


### 光的视锥外阴影问题
